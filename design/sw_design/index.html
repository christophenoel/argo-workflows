
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../../helm_charts/">
      
      
        <link rel="next" href="../rest_api_design/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.31">
    
    
      
        <title>Software Design - Argo Workflows documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.3cba04c6.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/print-site-enum-headings1.css">
    
      <link rel="stylesheet" href="../../css/print-site-enum-headings2.css">
    
      <link rel="stylesheet" href="../../css/print-site-enum-headings3.css">
    
      <link rel="stylesheet" href="../../css/print-site-enum-headings4.css">
    
      <link rel="stylesheet" href="../../css/print-site-enum-headings5.css">
    
      <link rel="stylesheet" href="../../css/print-site-enum-headings6.css">
    
      <link rel="stylesheet" href="../../css/print-site.css">
    
      <link rel="stylesheet" href="../../css/print-site-material.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
      <link rel="stylesheet" href="../../css/mkdocsoad.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#software-design-document-for-argo-workflow" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Argo Workflows documentation" class="md-header__button md-logo" aria-label="Argo Workflows documentation" data-md-component="logo">
      
  <img src="../../assets/logo-dimsum-white.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Argo Workflows documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Software Design
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="orange"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/dimsum-project/argo-workflows" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    argo-workflows
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../user_manual/" class="md-tabs__link">
          
  
  User Guide

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../installation_manual/" class="md-tabs__link">
          
  
  Operator Guide

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="./" class="md-tabs__link">
        
  
    
  
  Software Design

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../rest_api_design/" class="md-tabs__link">
          
  
  Interfaces

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../LICENSE/" class="md-tabs__link">
        
  
    
  
  License

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Argo Workflows documentation" class="md-nav__button md-logo" aria-label="Argo Workflows documentation" data-md-component="logo">
      
  <img src="../../assets/logo-dimsum-white.svg" alt="logo">

    </a>
    Argo Workflows documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/dimsum-project/argo-workflows" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    argo-workflows
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    User Guide
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user_manual/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Software User Manual
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../workflow_design_manual/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Workflow Design Manual
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial_cli/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CLI Tutorial
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial_rest/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    REST Tutorial
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial_gui/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GUI Tutorial
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Operator Guide
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Operator Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation_manual/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../docker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Docker
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kubernetes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kubernetes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../helm_charts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Helm Charts
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Software Design
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Software Design
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    <span class="md-ellipsis">
      Table of Contents
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Table of Contents">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#general" class="md-nav__link">
    <span class="md-ellipsis">
      General
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#component-identifier" class="md-nav__link">
    <span class="md-ellipsis">
      Component Identifier
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#type" class="md-nav__link">
    <span class="md-ellipsis">
      Type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#purpose" class="md-nav__link">
    <span class="md-ellipsis">
      Purpose
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function" class="md-nav__link">
    <span class="md-ellipsis">
      Function
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Function">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#api" class="md-nav__link">
    <span class="md-ellipsis">
      API
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reusable-workflow-templates" class="md-nav__link">
    <span class="md-ellipsis">
      Reusable Workflow Templates
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dag-workflow-creation" class="md-nav__link">
    <span class="md-ellipsis">
      DAG Workflow Creation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-artefacts" class="md-nav__link">
    <span class="md-ellipsis">
      Data Artefacts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#retry-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      Retry Strategy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#notification" class="md-nav__link">
    <span class="md-ellipsis">
      Notification
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hardware-constraints" class="md-nav__link">
    <span class="md-ellipsis">
      Hardware Constraints
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#artefact-persistence" class="md-nav__link">
    <span class="md-ellipsis">
      Artefact Persistence
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#retention-policies" class="md-nav__link">
    <span class="md-ellipsis">
      Retention Policies
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subordinates" class="md-nav__link">
    <span class="md-ellipsis">
      Subordinates
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      Dependencies
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interfaces" class="md-nav__link">
    <span class="md-ellipsis">
      Interfaces
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resources" class="md-nav__link">
    <span class="md-ellipsis">
      Resources
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data" class="md-nav__link">
    <span class="md-ellipsis">
      Data
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Interfaces
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Interfaces
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../rest_api_design/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    REST API Design
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../rest_api_spec/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    REST API Specification
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../LICENSE/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    License
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    <span class="md-ellipsis">
      Table of Contents
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Table of Contents">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#general" class="md-nav__link">
    <span class="md-ellipsis">
      General
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#component-identifier" class="md-nav__link">
    <span class="md-ellipsis">
      Component Identifier
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#type" class="md-nav__link">
    <span class="md-ellipsis">
      Type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#purpose" class="md-nav__link">
    <span class="md-ellipsis">
      Purpose
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function" class="md-nav__link">
    <span class="md-ellipsis">
      Function
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Function">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#api" class="md-nav__link">
    <span class="md-ellipsis">
      API
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reusable-workflow-templates" class="md-nav__link">
    <span class="md-ellipsis">
      Reusable Workflow Templates
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dag-workflow-creation" class="md-nav__link">
    <span class="md-ellipsis">
      DAG Workflow Creation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-artefacts" class="md-nav__link">
    <span class="md-ellipsis">
      Data Artefacts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#retry-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      Retry Strategy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#notification" class="md-nav__link">
    <span class="md-ellipsis">
      Notification
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hardware-constraints" class="md-nav__link">
    <span class="md-ellipsis">
      Hardware Constraints
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#artefact-persistence" class="md-nav__link">
    <span class="md-ellipsis">
      Artefact Persistence
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#retention-policies" class="md-nav__link">
    <span class="md-ellipsis">
      Retention Policies
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subordinates" class="md-nav__link">
    <span class="md-ellipsis">
      Subordinates
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      Dependencies
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interfaces" class="md-nav__link">
    <span class="md-ellipsis">
      Interfaces
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resources" class="md-nav__link">
    <span class="md-ellipsis">
      Resources
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data" class="md-nav__link">
    <span class="md-ellipsis">
      Data
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="software-design-document-for-argo-workflow">Software Design Document for Argo-Workflow</h1>
<h2 id="table-of-contents">Table of Contents</h2>
<ul>
<li><a href="#general">General</a></li>
<li><a href="#component-identifier">Component Identifier</a></li>
<li><a href="#type">Type</a></li>
<li><a href="#purpose">Purpose</a></li>
<li><a href="#function">Function</a></li>
<li><a href="#subordinates">Subordinates</a></li>
<li><a href="#dependencies">Dependencies</a></li>
<li><a href="#interfaces">Interfaces</a></li>
<li><a href="#resources">Resources</a></li>
<li><a href="#data">Data</a></li>
</ul>
<h3 id="general">General</h3>
<p>This section provides a detailed look at the design aspects of each component used in the software. </p>
<h3 id="component-identifier">Component Identifier</h3>
<ul>
<li><strong>Description</strong>: Argo Workflows enables the chaining of container-based modules and workflows.</li>
<li><strong>Naming Convention</strong>: Argo-Workflows</li>
</ul>
<h3 id="type">Type</h3>
<ul>
<li><strong>Logical Characteristics</strong>: Argo Workflows is the main functional component implementing the Data Processing Environment sub-system of the OHDSA platform.</li>
<li><strong>Physical Characteristics</strong>: Argo Workflows is a Commercial-Of-The-Shelf (COTS) Kubernetes-native workflow engine that orchestrates parallel jobs on a Kubernetes cluster. It uses Kubernetes resources like custom resources, pods, jobs, ConfigMaps, and Secrets to implement and manage workflows. Each workflow is defined as a Workflow object, which dictates the sequence of tasks to be executed. These tasks are encapsulated as Kubernetes Jobs or Pods, making each step of the workflow a discrete, schedulable unit under Kubernetes management.</li>
</ul>
<h3 id="purpose">Purpose</h3>
<p>Argo Workflows component is designed to fulfill a pivotal role in managing and executing complex workflows that integrate various modules within Docker containers. The purpose of Argo Workflows is to enable users to submit both simple and elaborate workflows with a versatile Workflow Definition Language that accommodates Directed Acyclic Graph models, dynamic resource allocation, retry strategies, the utilisation of specialized hardware, and completion notifications. </p>
<h3 id="function">Function</h3>
<p>Argo Workflows is a container-native workflow engine for Kubernetes, designed to orchestrate parallel jobs in a cloud environment. Here are its major functions:</p>
<ul>
<li><strong>Workflow Orchestration</strong>: Executes workflows where each step is a container, handling sequential, parallel, or conditionally executed steps.
  Each Step and Directed Acyclic Graph (DAG) Task triggers the creation of a Pod. 
  Each Pod comprises three containers:</li>
<li>Main Container: This container executes the user-specified image. The argoexec utility is volume-mounted within this container and functions as the primary command, invoking the configured command as a subprocess.</li>
<li>Init Container: Known as an InitContainer, this container is responsible for fetching artifacts and parameters, making them accessible to the main container.</li>
<li>Wait Container: This container is tasked with performing necessary cleanup operations, including the preservation of parameters and artifacts.</li>
</ul>
<p><strong>TBD</strong>: add diagram to represent container usage</p>
<p>For more information, see: https://argo-workflows.readthedocs.io/en/stable/architecture/</p>
<ul>
<li>
<p><strong>DAG Execution</strong>: Argo Workflows can manage task dependencies using Directed Acyclic Graphs to ensure optimal execution order.In a DAG template, tasks without any dependency will be run immediately.</p>
</li>
<li>
<p><strong>Resource Optimization</strong>: Dynamically allocates resources based on task demands, optimizing cluster resource use.
  To achieve resource usage optimization, one can leverage Kubernetes resource mechanisms (limits and requests). </p>
</li>
<li>
<p><strong>Error Handling and Retry Logic</strong>: Argo Workflow provides built-in mechanisms for error recovery and task retries.</p>
</li>
<li>
<p><strong>Monitoring</strong>: Argo produces metrics that provide information on the controller's status. As those metrics follow the same format as required by prometheus, those can be integrated with Prometheus.
  Two types of metrics are emitted by Argo: </p>
</li>
<li>Controller metrics: concerns the state of the controller;</li>
<li>Custom metrics: regards the state of a Workflow, or a series of Workflows. Those metrics can be defined on the Workflow/Step/Task emitting the metric. using the same name and help string, is a required by prometheus to track the metrics over time. </li>
</ul>
<p>For more information, see: See: https://argo-workflows.readthedocs.io/en/stable/metrics/</p>
<ul>
<li><strong>Logging</strong>: 
It is officially not recommended to rely on Argo to archive logs as it is a naive solution, not designed for indexing, searching, and storing logs (see: https://argo-workflows.readthedocs.io/en/stable/configure-archive-logs/). 
In a Kubernetes environment, logs can be forwarded by an agent running on the node (see: https://kubernetes.io/docs/concepts/cluster-administration/logging/#using-a-node-logging-agent). 
This agent can forward logs to be saved and indexed for a future usage. Such solution can be provided by Fluentd (acting as the agent forwarding logs). Such logs can be forwarded to ElasticSearch (ELK) which supports storing, indexing and searching capabilities.</li>
</ul>
<p><strong>TBD</strong>: add diagram to represent logging workflow</p>
<ul>
<li>
<p><strong>Role-Based Access Control (RBAC)</strong>: Utilizes Kubernetes RBAC to control access to workflow execution and management.
  All users of the Argo Server must use a service account in order to interact with the Argo Controller. A single service account can be shared by multiple users, as it is used to list  possible actions a user can do.
  Rules  defined in Argo can associate a user (using their OIDC group) to a service account in the same namespace as Argo server by annotating the desired service account. By using such rules, users from the OIDC provider are associated to the appropriate service account, with which they can interact with Argo Workflow server to manage workflows.
  For more information, see: https://argo-cd.readthedocs.io/en/stable/operator-manual/user-management/keycloak/</p>
</li>
<li>
<p><strong>Artifacts</strong>
Argo supports staging-in, staging-out and passing artifacts between steps thanks to artifact repositories.
An artifact repository can be used with any S3 compatible API (like Minio). Artifact repositories are defined in Kubernetes configmaps and referenced in workflow templates in order to reduce information duplication and simplify artifact repository usage.
It also supports other interfaces such as GIT. For more information,see: https://argo-workflows.readthedocs.io/en/stable/configure-artifact-repository/</p>
</li>
<li>
<p><strong>Notification</strong>
A default Exit handler can be configured in order to send notifications (such as emails or anything) to notify the completion of a workflow execution (failure/success). The exit handler is defined as a container executing a command, which permits to do anything with the end of the workflow, making it possible to communicate over any protocol.
  https://argo-workflows.readthedocs.io/en/stable/workflow-notifications/</p>
</li>
</ul>
<p>For more detailed information, visit the <a href="https://argoproj.github.io/argo-workflows/">official Argo Workflows documentation</a>.</p>
<p>The following subsections focus on the implementation of the <strong>OHDSA specific capabilities</strong> supported by the workflow engine.</p>
<h4 id="api">API</h4>
<p>Argo Workflow provide a REST API endpoint with plenty operations, in which we can find the following ones:
- Workflow Template creation
- List available Workflow Templates 
- Describe Workflow Template
- List Workflows
- Submit Workflow
- Delete Workflow
- Retrieve Workflow Status
- Retrieve Workflow Logs</p>
<p>For more information on those operations,see API design documentation: <a href="rest_api_design">API</a></p>
<h4 id="reusable-workflow-templates">Reusable Workflow Templates</h4>
<blockquote>
<p>TBD: Workflow designer prepares reusable workflow templates for standardizing and streamlining reusable steps</p>
</blockquote>
<p>Argo Workflow supports defining workflow templates reused in workflow definitions. The REST API provide an operation to register such workflow template. For more information on this, see section 'Workflow Template creation' in the API Design document: <a href="rest_api_design">API</a>
The following example represents a workflow template definition:
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">WorkflowTemplate</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">hello-world-wft</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">entrypoint</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">whalesay</span>
<span class="w">  </span><span class="nt">templates</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">whalesay</span>
<span class="w">      </span><span class="nt">inputs</span><span class="p">:</span>
<span class="w">        </span><span class="nt">parameters</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">message</span>
<span class="w">      </span><span class="nt">container</span><span class="p">:</span>
<span class="w">        </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">docker/whalesay</span>
<span class="w">        </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"> </span><span class="nv">cowsay</span><span class="w"> </span><span class="p p-Indicator">]</span>
<span class="w">        </span><span class="nt">args</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;{{inputs.parameters.message}}&quot;</span><span class="p p-Indicator">]</span>
</code></pre></div>
See: <a href="../../examples/hello-world-template/hello-world-wf-template.yml">Example</a></p>
<h4 id="dag-workflow-creation">DAG Workflow Creation</h4>
<p>Workflow designer creates workflows using a Directed Acyclic Graph (DAG) model.
Workflow templates can be referenced in DAG workflows in order to define workflow's tasks.</p>
<p>The following example represents a DAG workflow definition:
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Workflow</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">generateName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dag-test-workflow-</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">entrypoint</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">whalesay</span>
<span class="w">  </span><span class="nt">templates</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">whalesay</span>
<span class="w">      </span><span class="nt">dag</span><span class="p">:</span>
<span class="w">        </span><span class="nt">tasks</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">call-wf-template-1</span>
<span class="w">            </span><span class="nt">templateRef</span><span class="p">:</span>
<span class="w">              </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">wf-template-1</span>
<span class="w">              </span><span class="nt">template</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">whalesay-workflow-template</span>
<span class="w">            </span><span class="nt">arguments</span><span class="p">:</span>
<span class="w">              </span><span class="nt">parameters</span><span class="p">:</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">message</span>
<span class="w">                  </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;hello</span><span class="nv"> </span><span class="s">world&quot;</span>
</code></pre></div></p>
<h4 id="data-artefacts">Data Artefacts</h4>
<blockquote>
<p>For managing input and output data, the following principles are applied:
1. Data Inputs as Artefacts: In a WorkflowTemplate, input data should be provided as an artifact, which is submitted as an argument by the workflow calling this template. See: <a href="../../examples/artifacts/input-artifact/artifact-consumer-wf.yml">Example</a>
2. Intermediate Artefacts: In a workflow template with multiple steps, intermediate artifacts are stored in the default repository (fast storage). See: <a href="../../examples/artifacts/intermediate-steps-artifacts/demo-wf.yml">Example</a>
3. Creating Artefacts: Workflows (which can call the templates) can create artifacts from:
A key in the default S3 repository. See: <a href="../../examples/artifacts/input-artifact/artifact-consumer-wf.yml">Example</a>
A key in a specified internal repository. SeeSee: <a href="../../examples/artifacts/specific-artifact-repository/artifact-consumer-wf.yml">Example</a>
Remote sources such as S3 or HTTP, offering flexibility. See: <a href="../../examples/artifacts/external-http-artifact/artifact-consumer-wf.yml">Example</a>
4. Credential Agnosticism: WorkflowTemplates do not handle credentials. External artifacts (HTTP, S3) are managed by a workflow generated by the Processing Gateway.</p>
<p>TBD interfacing with fast / slow storage areas on S3 and management of artefacts
Show how to define 2 multiple artifact repository (fast &amp; slow) +configure one as the default one.</p>
</blockquote>
<p>Artifact repositories are configured within a Kuebrnetes configmap within the same namespace as the workflow or within the management namespace.
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ConfigMap</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">artifact-repositories</span>
<span class="w">  </span><span class="nt">annotations</span><span class="p">:</span>
<span class="w">    </span><span class="nt">workflows.argoproj.io/default-artifact-repository</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">slow-s3-artifact-repository</span>
<span class="nt">data</span><span class="p">:</span>
<span class="w">  </span><span class="nt">slow-s3-artifact-repository</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">    </span><span class="no">s3:</span>
<span class="w">      </span><span class="no">bucket: argo-bucket</span>
<span class="w">      </span><span class="no">endpoint: slow-minio:9000</span>
<span class="w">      </span><span class="no">insecure: true</span>
<span class="w">      </span><span class="no">accessKeySecret:</span>
<span class="w">        </span><span class="no">name: my-minio-cred</span>
<span class="w">        </span><span class="no">key: accesskey</span>
<span class="w">      </span><span class="no">secretKeySecret:</span>
<span class="w">        </span><span class="no">name: my-minio-cred</span>
<span class="w">        </span><span class="no">key: secretkey</span>
<span class="w">  </span><span class="nt">fast-s3-artifact-repository</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">    </span><span class="no">s3:</span>
<span class="w">      </span><span class="no">bucket: argo-bucket</span>
<span class="w">      </span><span class="no">endpoint: fast-minio:9000</span>
<span class="w">      </span><span class="no">insecure: true</span>
<span class="w">      </span><span class="no">accessKeySecret:</span>
<span class="w">        </span><span class="no">name: my-minio-cred</span>
<span class="w">        </span><span class="no">key: accesskey</span>
<span class="w">      </span><span class="no">secretKeySecret:</span>
<span class="w">        </span><span class="no">name: my-minio-cred</span>
<span class="w">        </span><span class="no">key: secretkey</span>
</code></pre></div></p>
<ul>
<li><strong>TBD</strong>:Steps I/O Mappings: Workflow designer maps intermediary steps data outputs to inputs steps of the workflow.</li>
<li><strong>TBD</strong>:Data Transfer Steps: Workflow designer integrates data stage-in and stage-out steps managing interactions between persistent storage system (for external interfaces), intermediate data storage system (for intermediate steps).</li>
</ul>
<h4 id="retry-strategy">Retry Strategy</h4>
<blockquote>
<p>TBD Workflow designer implements retry strategies for failed or errored workflow steps
List the different strategies +show examples (retry number, backoff,...)</p>
</blockquote>
<p>The retry strategy is used to decide in which case a step is retried.</p>
<p><strong>Limit parameter:</strong>
A limit parameter san be specified in order to limit the number of reties.</p>
<p><strong>Retry Policy:</strong>
In addition to this limit parameter, one can define a retry policy.
Retry policies in Argo Workflows are configured using the retryPolicy parameter defined in Workflow specification. It determines the conditions under which failed steps should be retried.
The available retry policies include:
- Always: Retries all failed steps, regardless of the failure type.
- OnFailure: Retries steps where the main container is marked as failed by Kubernetes.
- OnError: Retries steps that encounter errors related to the Argo controller, or steps where the init or wait containers fail.
- OnTransientError: Retries steps that encounter transient errors or errors that match the pattern specified in the TRANSIENT_ERROR_PATTERN environment variable.</p>
<p><strong>Expressions</strong>:In addition to retry policies, retries in Argo Workflows can be controlled using expressions. These expressions have access to the following variables:
- lastRetry.exitCode: The exit code of the last retry, or "-1" if not available. 
- lastRetry.status: The phase of the last retry, which can be "Error" or "Failed".
- lastRetry.duration: The duration of the last retry, measured in seconds. 
- lastRetry.message: The message output from the last retry.</p>
<p>If the expression evaluates to false, the step will not be retried. The result of the expression is logically combined (using a logical AND) with the retryPolicy. Both the expression and the retry policy must evaluate to true for a retry to occur.</p>
<p><strong>Backoff</strong>: The backoff parameter can be used to avoid too frequent retries too soon by introducing a delay between retries, thereby preventing immediate subsequent retry attempts.</p>
<p><strong>TBD</strong>: add example of retry strategy</p>
<p>For more information, see: https://argo-workflows.readthedocs.io/en/stable/retries/</p>
<h4 id="notification">Notification</h4>
<blockquote>
<p><strong>TBD</strong>: describe how exit handler can be used to send notification of any type (using a container to send a AMQP message)</p>
</blockquote>
<h4 id="hardware-constraints">Hardware Constraints</h4>
<blockquote>
<p>TBD: Resource requirements/limits and affinities
Describe how to use affinities to deploy pods on nodes with specific harware
Describe how to define resource requests/limits to deploy on node with sufficient resource (optimize resource usage).</p>
</blockquote>
<p>When defining a workflow template, resource requirements can be specified within the 'container' section. The 'podSpecPatch' field in either the workflow or workflow template allows for overriding the resource limits and requests for a container. See: <a href="https://github.com/argoproj/argo-workflows/blob/main/examples/pod-spec-patch.yaml">Example</a></p>
<p><strong>TBD</strong>: add request/limits example</p>
<p>To ensure a container runs on a Kubernetes node with specific hardware configurations, a nodeSelector can be defined in the workflow specification or workflow template. This nodeSelector should reference labels that match those defined on the desired node. 
It is essential that Kubernetes nodes with specific hardware configurations use labels matching those used in the workflow/template nodeSelector parameter.</p>
<p><strong>TBD</strong>: add nodeSelector example</p>
<h4 id="artefact-persistence">Artefact Persistence</h4>
<blockquote>
<p>TBD:  Workflow designer mark specific artefacts for persistence, overriding their default temporary status</p>
</blockquote>
<h4 id="retention-policies">Retention Policies</h4>
<blockquote>
<p>TBD:  Workflow engine operator configure retention policies to remove expired workflows automatically
Archiving workflows: https://argo-workflows.readthedocs.io/en/stable/workflow-archive/</p>
</blockquote>
<p>The workflow archive stores information about the workflows such as the status, pods executed, results and more. This information is stored in a database such as PostgreSQL.</p>
<p><strong>Archive TTL</strong>:
Specifies the time period to keep archived workflows before they will be deleted by the archived workflow garbage collection function. The default is forever.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><span class="nt">persistence</span><span class="p">:</span>
<span class="w">  </span><span class="nt">archiveTTL</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10d</span>
</code></pre></div></p>
<h3 id="subordinates">Subordinates</h3>
<p>Argo Workflows encompasses the various components and resources it manages and interacts with to orchestrate and execute workflows.</p>
<ul>
<li><strong>Workflow Templates</strong> : These are predefined configurations that describe specific workflows. They serve as blueprints from which instances of workflows are generated and executed. Workflow templates define the sequence of tasks, their dependencies, and the resources needed for each task.</li>
<li><strong>Tasks/Pods</strong> - In the context of Argo Workflow, each step in a workflow is executed as a separate pod within the Kubernetes environment. These pods can be considered subcomponents of the workflow they belong to, executing specific actions defined by the workflow and then reporting back their status upon completion or failure.</li>
</ul>
<blockquote>
<p>Note: identify the DB, message broker, prometheus, etc.</p>
</blockquote>
<h3 id="dependencies">Dependencies</h3>
<ul>
<li><strong>Description</strong>: Detail any operations or conditions that must be met before this component can function properly, including exclusions during its operation.</li>
</ul>
<blockquote>
<p>Note: if relevant, express dependency with other components (e.g. workflow needs module registry)
Reflect the config of charts </p>
</blockquote>
<h3 id="interfaces">Interfaces</h3>
<ul>
<li><strong>Control Flow</strong>: Describe how the component starts and terminates, including any interactions during execution (such as interrupts).</li>
<li><strong>Data Flow</strong>: Explain the input and output data flows, ensuring data structures are linked with control flows and interface components through common data areas or files.</li>
</ul>
<p>Documentation detailing the API specifications and usage is provided in teh <a href="./rest_api_design">API Design</a></p>
<blockquote>
<p>NOte: sequence diagram and link to the api-design document.</p>
</blockquote>
<h3 id="resources">Resources</h3>
<ul>
<li><strong>Requirements</strong>: Itemize what the component needs from its environment to perform its function, excluding items that are part of the component interface.</li>
</ul>
<blockquote>
<p>NOTE: include docker dependencies, might include maven dependencies (libs)</p>
</blockquote>
<h3 id="data">Data</h3>
<p>Argo Workflows utilises complex internal data structures to orchestrate and manage workflows within Kubernetes. Here's a summary of these structures:</p>
<ul>
<li><strong>Workflow Definitions</strong>: Defined as custom resources in YAML, these include:</li>
<li><strong>Element Descriptions</strong>: Identifiers (names), types (e.g., script, container), and dimensions (step hierarchies and dependencies).</li>
<li><strong>Relationships</strong>: Defines parent-child relationships among steps using dependencies that structure the workflow as a Directed Acyclic Graph (DAG).</li>
<li><strong>Value Range</strong>: Includes everything from static strings to dynamic outputs from previous steps.</li>
<li>
<p><strong>Initial Values</strong>: Elements such as parameters may have default values specified in the workflow template.</p>
</li>
<li>
<p><strong>Workflow Status</strong>: This structure tracks the real-time state of each step within the workflow, indicating whether a step is pending, running, succeeded, or failed.</p>
</li>
<li>
<p><strong>Artifacts</strong>: Used to manage data inputs and outputs for each step. Artifacts can be files stored in various storage backends (e.g., S3, Artifactory).</p>
</li>
</ul>
<p>For more detailed information about the internal data structures used by Argo Workflows, including their specifications and how they are utilised within workflows, refer to the <a href="https://argo-workflows.readthedocs.io/en/stable/fields/">official Argo Workflows Field Reference</a>. This documentation provides comprehensive guides on defining and managing workflows, with specific sections on workflow specifications, status monitoring, and artifact handling.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.sections"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.fe8b6f2b.min.js"></script>
      
        <script src="../../js/print-site.js"></script>
      
    
  </body>
</html>